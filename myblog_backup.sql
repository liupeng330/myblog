-- MySQL dump 10.13  Distrib 5.5.49, for debian-linux-gnu (x86_64)
--
-- Host: localhost    Database: myblog
-- ------------------------------------------------------
-- Server version	5.5.49-0+deb7u1

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;
/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
/*!40103 SET TIME_ZONE='+00:00' */;
/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;

--
-- Current Database: `myblog`
--

CREATE DATABASE /*!32312 IF NOT EXISTS*/ `myblog` /*!40100 DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci */;

USE `myblog`;

--
-- Table structure for table `blog`
--

DROP TABLE IF EXISTS `blog`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `blog` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `title` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `summary` text COLLATE utf8_unicode_ci NOT NULL,
  `content` text COLLATE utf8_unicode_ci NOT NULL,
  `update_time` datetime NOT NULL,
  `create_time` datetime NOT NULL,
  `status` varchar(45) COLLATE utf8_unicode_ci NOT NULL,
  `show_count` int(11) NOT NULL DEFAULT '0',
  `user_name` varchar(45) COLLATE utf8_unicode_ci NOT NULL,
  `category_id` int(11) NOT NULL,
  `format` varchar(10) COLLATE utf8_unicode_ci NOT NULL,
  PRIMARY KEY (`id`),
  KEY `fk_blog_1_idx` (`user_name`),
  KEY `fk_blog_2_idx` (`category_id`),
  CONSTRAINT `fk_blog_2` FOREIGN KEY (`category_id`) REFERENCES `category` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `fk_username` FOREIGN KEY (`user_name`) REFERENCES `user` (`name`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=32 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `blog`
--

LOCK TABLES `blog` WRITE;
/*!40000 ALTER TABLE `blog` DISABLE KEYS */;
INSERT INTO `blog` VALUES (20,'使用Jenkins远程部署war包到tomcat container','使用Jenkins远程部署war包到tomcat container','<p>Jenkins首先使用maven将源代码进行编译打包，之后需要将war包传送到tomcat服务器上进行部署。</p>\r\n<p>来看一下Jenkins的基本配置，首先需要安装插件\"Deploy to container Plugin\":</p>\r\n<p>\r\n<a href=\"/resources/417769-20160608155015824-1832501015.png\" data-lightbox=\"image-1\"    data-title=\"\"><img src=\"/resources/417769-20160608155015824-1832501015.png\" width=\"705\" height=\"274\" /></a><br/>\r\n</p>\r\n<p> </p>\r\n<p>但是在安装插件时，Jenkins会先ping www.google.com这个域名来保证网络连通性 ，我们需要将其改为www.baidu.com，来使得检查阶段通过：</p>\r\n<p>编辑Jenkins的配置文件default.json:</p>\r\n<p>\r\n<a href=\"/resources/417769-20160608155322230-1902133793.png\" data-lightbox=\"image-1\"    data-title=\"\"><img src=\"/resources/417769-20160608155322230-1902133793.png\"  width=\"423\" height=\"33\" /></a><br/>\r\n</p>\r\n<p>将connnectionCheckUrl改为http://www.baidu.com/</p>\r\n<p>\r\n<a href=\"/resources/417769-20160608155334558-1428213072.png\" data-lightbox=\"image-1\"    data-title=\"\"><img src=\"/resources/417769-20160608155334558-1428213072.png\" width=\"1473\" height=\"432\" /></a><br/>\r\n</p>\r\n<p> </p>\r\n<p>还需要安装github相关插件，使其可以从github上pull代码下来：</p>\r\n<p>\r\n<a href=\"/resources/417769-20160608160530527-1277918565.png\" data-lightbox=\"image-1\"    data-title=\"\"><img src=\"/resources/417769-20160608160530527-1277918565.png\" width=\"873\" height=\"255\" /></a><br/>\r\n</p>\r\n<p> </p>\r\n<p>配置Jenkins的github：</p>\r\n<p>\r\n<a href=\"/resources/417769-20160608161305886-12288945.png\" data-lightbox=\"image-1\"    data-title=\"\"><img src=\"/resources/417769-20160608161305886-12288945.png\" width=\"930\" height=\"641\" /></a><br/>\r\n</p>\r\n<p>\r\n<a href=\"/resources/417769-20160608161510949-1669310641.png\" data-lightbox=\"image-1\"    data-title=\"\"><img src=\"/resources/417769-20160608161510949-1669310641.png\" width=\"920\" height=\"582\" /></a><br/>\r\n</p>\r\n<p> </p>\r\n<p>maven构建的参数和构建成功后需要做的操作如下：</p>\r\n<p>\r\n<a href=\"/resources/417769-20160608161709761-57172803.png\" data-lightbox=\"image-1\"    data-title=\"\"><img src=\"/resources/417769-20160608161709761-57172803.png\"  width=\"911\" height=\"618\" /></a><br/>\r\n</p>\r\n<p>上面的Context path是部署到tomcat的webapps下的目录名字，这里会将war包部署到tomcat的webapps/myblog.war</p>\r\n<p> </p>\r\n<p> </p>\r\n<p>\r\n<a href=\"/resources/417769-20160608161817980-1090995013.png\" data-lightbox=\"image-1\"    data-title=\"\"><img src=\"/resources/417769-20160608161817980-1090995013.png\"  width=\"873\" height=\"433\" /></a><br/>\r\n</p>\r\n<p> </p>\r\n<p>上面使用了插件\"deploy to container\"来将maven构建出来的war包部署到远程机器上面，使用tomcat的部署用户名tomcat。</p>\r\n<p> </p>\r\n<p>需要配置tomcat的配置文件tomcat/conf/tomcat-users.xml，将名为tomcat的用户配上以下三个角色：admin-gui, manager-gui和manager-script，这样才可以使用tomcat这个用户完成远程部署的功能：</p>\r\n<p>\r\n<a href=\"/resources/417769-20160608164022699-1073091087.png\" data-lightbox=\"image-1\"    data-title=\"\"><img src=\"/resources/417769-20160608164022699-1073091087.png\" width=\"896\" height=\"99\" /></a><br/>\r\n</p>\r\n<p> </p>\r\n<p>最后点击“立即构建”，成功后如下图：</p>\r\n<p>\r\n<a href=\"/resources/417769-20160608165404855-1564686491.png\" data-lightbox=\"image-1\"    data-title=\"\"><img src=\"/resources/417769-20160608165404855-1564686491.png\"width=\"845\" height=\"408\" /></a><br/>\r\n</p>\r\n<p> </p>','2016-06-21 06:00:45','2016-06-18 08:25:47','PUBLISHED',4,'peng',5,'HTML'),(21,'使用JMeter测试基于WebSocket协议的服务','使用JMeter测试基于WebSocket协议的服务','<ul>\r\n	<li>由于JMeter没有针对WebSocket的sampler，所以就需要安装开源的插件，以使其支持WebSocket协议。</li>\r\n</ul>\r\n<h3 id=\"安装jmeter-websocketsampler\"><a name=\"安装jmeter-websocketsampler\" href=\"#安装jmeter-websocketsampler\"></a>安装JMeter WebSocketSampler</h3>\r\n<ul>\r\n	<li>\r\n		<p>首先，从github上clone源码下来，地址如下： <a href=\"https://github.com/maciejzaleski/JMeter-WebSocketSampler\">https://github.com/maciejzaleski/JMeter-WebSocketSampler</a></p>\r\n	</li>\r\n	<li>\r\n		<p>之后，使用Maven构建此代码后，将jar包“JMeterWebSocketSampler-1.0.2-SNAPSHOT.jar”放到JMeter的“lib/ext/”目录中，此目录是JMeter用来放置扩展包的地方。</p>\r\n	</li>\r\n	<li>\r\n		<p>最后，将websocket sampler依赖的其他jar包放到“lib”目录下，此目录是JMeter用来放插件所依赖的jar包的地方。websocket sampler所依赖的jar包如下：</p>\r\n		<ul>\r\n			<li>jetty-http-9.1.1.v20140108.jar</li>\r\n			<li>jetty-io-9.1.1.v20140108.jar</li>\r\n			<li>jetty-util-9.1.1.v20140108.jar</li>\r\n			<li>websocket-api-9.1.1.v20140108.jar</li>\r\n			<li>websocket-client-9.1.1.v20140108.jar</li>\r\n			<li>websocket-common-9.1.1.v20140108.jar</li>\r\n		</ul>\r\n	</li>\r\n	<li>\r\n		<p>打开JMeter，通过”Add” -> “Sampler” -> “WebSocket Sampler”，添加一个取样器：<br>\r\n<a href=\"/resources/417769-20160405151151484-1339355405.png\" data-lightbox=\"image-1\"    data-title=\"\"><img src=\"/resources/417769-20160405151151484-1339355405.png\"  /></a>\r\n</p>\r\n\r\n\r\n\r\n\r\n\r\n\r\n	</li>\r\n\r\n\r\n\r\n\r\n\r\n</ul>\r\n<h3> </h3>\r\n<h3 id=\"创建一个简单的websocket实现：\"><a name=\"创建一个简单的websocket实现：\" href=\"#创建一个简单的websocket实现：\"></a>创建一个简单的websocket实现：</h3>\r\n<ul>\r\n	<li>通过下面blog所说的步骤，构建一个基于websocket协议的聊天室：<br><a href=\"http://waylau.com/netty-websocket-chat/\">http://waylau.com/netty-websocket-chat/</a></li>\r\n	<li>启动后如图：<br>\r\n<a href=\"/resources/417769-20160405151207187-91680215.png\" data-lightbox=\"image-1\"    data-title=\"\"><img src=\"/resources/417769-20160405151207187-91680215.png\"  /></a>\r\n</li>\r\n\r\n\r\n\r\n\r\n\r\n</ul>\r\n<h3> </h3>\r\n<h3 id=\"使用jmeter测试websocket聊天室\"><a name=\"使用jmeter测试websocket聊天室\" href=\"#使用jmeter测试websocket聊天室\"></a>使用JMeter测试websocket聊天室</h3>\r\n<ul>\r\n	<li>\r\n		<p>配置WebSocket Sampler如下图：<br>\r\n<a href=\"/resources/417769-20160405151218125-2059241790.png\" data-lightbox=\"image-1\"    data-title=\"\"><img src=\"/resources/417769-20160405151218125-2059241790.png\"  /></a>\r\n</p>\r\n\r\n\r\n\r\n\r\n\r\n\r\n	</li>\r\n	<li>\r\n		<p>运行后，查看JMeter显示结果：<br>\r\n<a href=\"/resources/417769-20160405151235906-492174240.png\" data-lightbox=\"image-1\"    data-title=\"\"><img src=\"/resources/417769-20160405151235906-492174240.png\"  /></a>\r\n</p>\r\n\r\n\r\n\r\n\r\n\r\n\r\n	</li>\r\n	<li>\r\n		<p>查看聊天室，发现确实收到的此条消息：<br>\r\n<a href=\"/resources/417769-20160405151242156-1678150427.png\" data-lightbox=\"image-1\"    data-title=\"\"><img src=\"/resources/417769-20160405151242156-1678150427.png\"  /></a>\r\n</p>\r\n	</li>\r\n</ul>\r\n','2016-06-20 15:43:14','2016-06-18 08:38:53','PUBLISHED',12,'peng',10,'HTML'),(22,'定制JMeter取样器','使用JMeter定义自己的取样器sampler，方法很简单，只需继承类org.apache.jmeter.protocol.java.sampler.AbstractJavaSamplerClient，并重写若干方法即可。','<div id=\"cnblogs_post_body\"><ul>\r\n<li>\r\n<p>JMeter运行你区定义自己的取样器sampler，方法很简单，只需继承类org.apache.jmeter.protocol.java.sampler.AbstractJavaSamplerClient，并重写若干方法即可。</p>\r\n</li>\r\n<li>\r\n<p>首先，创建一个maven项目，并加入jmeter相关的依赖包：</p>\r\n</li>\r\n</ul>\r\n<div class=\"cnblogs_code\"><div class=\"cnblogs_code_toolbar\"></div>\r\n<pre class=\"brush: xml\">\r\n<dependencies>\r\n    <dependency>\r\n        <groupId>org.apache.jmeter</groupId>\r\n        <artifactId>ApacheJMeter</artifactId>\r\n        <version>2.10</version>\r\n    </dependency>\r\n    <dependency>\r\n        <groupId>org.apache.jmeter</groupId>\r\n        <artifactId>ApacheJMeter_core</artifactId>\r\n        <version>2.10</version>\r\n    </dependency>\r\n    <dependency>\r\n        <groupId>org.apache.jmeter</groupId>\r\n        <artifactId>ApacheJMeter_http</artifactId>\r\n        <version>2.10</version>\r\n    </dependency>\r\n    <dependency>\r\n        <groupId>org.apache.jmeter</groupId>\r\n        <artifactId>ApacheJMeter_java</artifactId>\r\n        <version>2.10</version>\r\n    </dependency>\r\n</dependencies>\r\n</pre>\r\n<div class=\"cnblogs_code_toolbar\"><span class=\"cnblogs_code_copy\"></span></div></div>\r\n<p> </p>\r\n<ul>\r\n<li>\r\n<p>然后，创建一个类，继承自AbstractJavaSamplerClient，并重写setupTest、teardownTest、runTest与getDefaultParameters方法即可</p>\r\n</li>\r\n</ul>\r\n<ul>\r\n<li>\r\n<p>代码示例如下：</p>\r\n</li>\r\n</ul>\r\n\r\n<pre class=\"brush: java\">\r\npackage pengliu.me.jmeter.plugins;\r\n\r\nimport org.apache.jmeter.config.Arguments;\r\nimport org.apache.jmeter.protocol.java.sampler.AbstractJavaSamplerClient;\r\nimport org.apache.jmeter.protocol.java.sampler.JavaSamplerContext;\r\nimport org.apache.jmeter.samplers.SampleResult;\r\nimport org.apache.jorphan.logging.LoggingManager;\r\nimport org.apache.log.Logger;\r\n\r\nimport java.util.Iterator;\r\nimport java.util.Random;\r\n\r\npublic class MySampler extends AbstractJavaSamplerClient\r\n{\r\n    private static final Logger log = LoggingManager.getLoggerForClass();\r\n\r\n    @Override\r\n    public void setupTest(JavaSamplerContext context)\r\n    {\r\n        Iterator<String> it = context.getParameterNamesIterator();\r\n        while (it.hasNext())\r\n        {\r\n            String paramName =  it.next();\r\n            this.log.info(String.format(\"-----------------paramName: %s, paramValue: %s-----------------\",\r\n                    paramName,\r\n                    context.getParameter(paramName)));\r\n        }\r\n\r\n        this.log.info(String.format(\"-----------------Get param \'name\' from JMeter: %s-----------------\",\r\n                context.getParameter(\"name\", \"Default Name\")));\r\n        this.log.info(String.format(\"-----------------Current Thread Id: %s, Start \'setupTest(JavaSamplerContext context)\'--------------------\",\r\n                Thread.currentThread().getId()));\r\n    }\r\n\r\n    @Override\r\n    public void teardownTest(JavaSamplerContext context)\r\n    {\r\n        this.log.info(String.format(\"-----------------Current Thread Id: %s, Start \'teardownTest(JavaSamplerContext context)\'--------------------\",\r\n                Thread.currentThread().getId()));\r\n    }\r\n\r\n    public SampleResult runTest(JavaSamplerContext javaSamplerContext)\r\n    {\r\n        SampleResult result = new SampleResult();\r\n        result.sampleStart();\r\n        try\r\n        {\r\n            Random r = new Random();\r\n            long sleepTime = (long)r.nextInt(5000);\r\n            this.log.info(String.format(\"-----------------Current Thread Id: %s, Running Test, sleep time is %s--------------------\",\r\n                    Thread.currentThread().getId(),\r\n                    sleepTime));\r\n            Thread.sleep(sleepTime);\r\n\r\n            if(sleepTime%2 == 0)\r\n            {\r\n                throw new Exception(\"--------This is my exception from runTest!!!---------\");\r\n            }\r\n\r\n            result.sampleEnd();\r\n            result.setSuccessful(true);\r\n            result.setSampleLabel(\"My Lable: SUCCESS: \" + Thread.currentThread().getId());\r\n        }\r\n        catch (Throwable e)\r\n        {\r\n            result.sampleEnd();\r\n            result.setSuccessful(false);\r\n            result.setSampleLabel(\"My Lable: FAIL: \" + Thread.currentThread().getId());\r\n\r\n            e.printStackTrace();\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    @Override\r\n    public Arguments getDefaultParameters() {\r\n\r\n        Arguments params = new Arguments();\r\n\r\n        params.addArgument(\"name\", \"edw\");\r\n\r\n        return params;\r\n    }\r\n}\r\n\r\n</pre>\r\n\r\n<ul>\r\n<li>其中setupTest与teardownTest方法，在一个线程只被执行一次，无论此Thread Group配置的Loop Count是多少，每个线程只运行一次这两个方法。</li>\r\n</ul>\r\n<ul>\r\n<li>其中runTest方法，如果一个线程配置了多次的Loop Count，那么此runTest就会运行多次</li>\r\n</ul>\r\n<ul>\r\n<li> 其中getDefaultParameters方法，返回的是JMeter界面的参数列表，如下图： <br>\r\n<a href=\"/resources/417769-20160401180756879-270848606.png\" data-lightbox=\"image-1\"    data-title=\"\"><img src=\"/resources/417769-20160401180756879-270848606.png\" height=\"30%\"  /></a>\r\n</li>\r\n</ul>\r\n<ul>\r\n<li>使用”mvn package”命令打包上面的sampler:</li>\r\n</ul>\r\n<p style=\"margin-left: 30px;\">\r\n<a href=\"/resources/417769-20160401180814348-1176040405.png\" data-lightbox=\"image-1\"    data-title=\"\"><img src=\"/resources/417769-20160401180814348-1176040405.png\"  /></a>\r\n</p>\r\n<p> </p>\r\n<ul>\r\n<li>将打包好的jar包放到JMeter的lib/ext目录下：\r\n   </li>\r\n</ul>\r\n<p style=\"margin-left: 30px;\">\r\n<a href=\"/resources/417769-20160401180824957-1457881516.png\" data-lightbox=\"image-1\"    data-title=\"\"><img src=\"/resources/417769-20160401180824957-1457881516.png\" height=\"30%\"   /></a>\r\n</p>\r\n<p style=\"margin-left: 30px;\"> </p>\r\n<ul>\r\n<li><span style=\"line-height: 1.5;\">启动JMeter, 并加入一个Java Request的sampler: </span></li>\r\n</ul>\r\n<p style=\"margin-left: 30px;\">\r\n<a href=\"/resources/417769-20160401180849738-2129685299.png\" data-lightbox=\"image-1\"    data-title=\"\"><img src=\"/resources/417769-20160401180849738-2129685299.png\" height=\"30%\"  /></a>\r\n</p>\r\n<p style=\"margin-left: 30px;\"> </p>\r\n<ul>\r\n<li><span style=\"line-height: 1.5;\">Classname选择代码中自定义的sampler类： </span>\r\n<a href=\"/resources/417769-20160401180906551-249494530.png\" data-lightbox=\"image-1\"    data-title=\"\"><img src=\"/resources/417769-20160401180906551-249494530.png\"  /></a>\r\n</li>\r\n</ul>\r\n<p> </p>\r\n<ul>\r\n<li>配置Thread Group，线程数为２，循环数为５： </li>\r\n</ul>\r\n<p style=\"margin-left: 30px;\">\r\n<a href=\"/resources/417769-20160401180920707-1649655577.png\" data-lightbox=\"image-1\"    data-title=\"\"><img src=\"/resources/417769-20160401180920707-1649655577.png\"  /></a>\r\n</p>\r\n<ul>\r\n<li>\r\n<p>选中Java Request这个sampler，可以设置参数name的值</p>\r\n</li>\r\n</ul>\r\n<ul>\r\n<li>\r\n    开始执行后，JMeter会产生两个线程，每个线程都跑只跑一遍setupTest与teardownTest方法，但会跑５遍runTest方法</li>\r\n</ul>\r\n<ul>\r\n<li>\r\n     查看JMeter的日志输出：\r\n     </li>\r\n</ul>\r\n<p style=\"margin-left: 30px;\">\r\n<a href=\"/resources/417769-20160401180931894-624793592.png\" data-lightbox=\"image-1\"    data-title=\"\"><img src=\"/resources/417769-20160401180931894-624793592.png\" height=\"50%\"  /></a>\r\n</p>\r\n<p> </p>\r\n<ul>\r\n<li>\r\n<p>查看”View Results in Table”中的结果：\r\n     <br>\r\n<a href=\"/resources/417769-20160401180939519-208110028.png\" data-lightbox=\"image-1\"    data-title=\"\"><img src=\"/resources/417769-20160401180939519-208110028.png\" height=\"30%\"   /></a>\r\n</p>\r\n</li>\r\n</ul>\r\n<p> </p></div>','2016-06-21 07:27:00','2016-06-18 08:54:36','PUBLISHED',16,'peng',10,'HTML'),(25,'解析Visual Studio Unit Test Result文件(trx文件)','解析Visual Studio Unit Test Result文件(trx文件)','<div id=\"cnblogs_post_body\"><p>Visual Studio单元测试的结果可以在Test Results窗口中很容易的看到，也可以使用TFS Publish测试结果:</p>\r\n<p>\r\n<a href=\"/resources/151518552518976.png\" data-lightbox=\"image-1\"    data-title=\"\"><img src=\"/resources/151518552518976.png\"  /></a><br>\r\n</p>\r\n<p>但是如果想要脱离IDE(使用mstest.exe来运行test dll或test list文件)来解析测试结果文件，就要面对这个trx文件复杂的结构了：</p>\r\n<p>\r\n<a href=\"/resources/151519121882835.png\" data-lightbox=\"image-1\"    data-title=\"\"><img src=\"/resources/151519121882835.png\"  /></a>\r\n</p>\r\n<p>每当运行完单元测试后，IDE会产生TestResults文件夹(此文件夹和test list文件*.vsmdi在同一层)来保存trx文件：</p>\r\n<p>\r\n<a href=\"/resources/151519359854231.png\" data-lightbox=\"image-1\"    data-title=\"\"><img src=\"/resources/151519359854231.png\"  /></a>\r\n</p>\r\n<p>我也曾写过解析这个文件的代码，并生成html格式的报告并通过邮件发出。最近发现一个开源的工具能够生成很易读的html格式的test report，地址如下：</p>\r\n<p><a href=\"http://trx2html.codeplex.com/\">http://trx2html.codeplex.com/</a></p>\r\n<p>下载，解压后，直接在命令行下运行这个trx2html.exe，并传入trx测试结果文件就行了：</p>\r\n<p>\r\n<a href=\"/resources/151519577826972.png\" data-lightbox=\"image-1\"    data-title=\"\"><img src=\"/resources/151519577826972.png\"  /></a>\r\n</p>\r\n<p>执行完毕，会在同级目录下生成.html文件格式的test report:</p>\r\n<p>\r\n<a href=\"/resources/151520497828019.png\" data-lightbox=\"image-1\"    data-title=\"\"><img src=\"/resources/151520497828019.png\"  /></a>\r\n</p>\r\n<p>和我们的测试代码对比一下：</p>\r\n<p>\r\n<a href=\"/resources/151521137829887.png\" data-lightbox=\"image-1\"    data-title=\"\"><img src=\"/resources/151521137829887.png\"  /></a>\r\n</p>\r\n<p>可以看到Description的内容和错误信息会显示在报告中</p></div>','2016-06-20 15:15:19','2016-06-19 14:14:11','PUBLISHED',20,'peng',6,'HTML'),(28,'使用XSLT生成Nunit测试报告','最近从mstest转到nunit，原因很简单，mstest如果要脱离IDE单独安装很麻烦，PPE环境下只会安装必要的依赖包，不可能把IDE也装上。相比之下，Nuit就清凉很多了，安装后可以直接用nuit-console.exe来运行测试了。','<div id=\"cnblogs_post_body\"><p><span>最近从mstest转到nunit，原因很简单，mstest如果要脱离IDE单独安装很麻烦，PPE环境下只会安装必要的依赖包，不可能把IDE也装上。相比之下，Nuit就清凉很多了，安装后可以直接用nuit-console.exe来运行测试了。</span><br><br><span>但问题是测试结果是xml形式的，可读性一般，如下：</span></p>\r\n<pre class=\"brush: xml\">\r\n<?xml version=\"1.0\" encoding=\"utf-8\" standalone=\"no\"?>\r\n<?xml-stylesheet type=\"text/xsl\" href=\"nunitresult.xslt\"?>\r\n \r\n<!--This file represents the results of running a test suite-->\r\n<test-results name=\"E:\\NUnitTest.dll\" total=\"3\" errors=\"1\" failures=\"0\" not-run=\"0\" inconclusive=\"0\" ignored=\"0\" skipped=\"0\" invalid=\"0\" date=\"2012-07-04\" time=\"10:09:16\">\r\n  <environment nunit-version=\"2.6.0.12051\" clr-version=\"2.0.50727.5456\" os-version=\"Microsoft Windows NT 6.1.7601 Service Pack 1\" platform=\"Win32NT\" cwd=\"C:\\Program Files\\NUnit 2.6\\bin\" machine-name=\"Test\" user=\"Tester\" user-domain=\"Test\" />\r\n  <culture-info current-culture=\"en-US\" current-uiculture=\"en-US\" />\r\n  <test-suite type=\"Assembly\" name=\"E:\\NUnitTest.dll\" executed=\"True\" result=\"Failure\" success=\"False\" time=\"0.109\" asserts=\"0\">\r\n    <results>\r\n      <test-suite type=\"Namespace\" name=\"NUnitTest\" executed=\"True\" result=\"Failure\" success=\"False\" time=\"0.103\" asserts=\"0\">\r\n        <results>\r\n          <test-suite type=\"TestFixture\" name=\"Class1\" executed=\"True\" result=\"Failure\" success=\"False\" time=\"0.102\" asserts=\"0\">\r\n            <results>\r\n              <test-case name=\"NUnitTest.Class1.SampleTest1\" description=\"Description1\" executed=\"True\" result=\"Success\" success=\"False\" time=\"0.061\" asserts=\"0\">\r\n                <failure>\r\n                  <message><![CDATA[Error message from assert fail!!]]></message>\r\n                  <stack-trace><![CDATA[at NUnitTest.Class1.SampleTest1() in E:\\NUnitTest\\Class1.cs:line 16\r\n]]></stack-trace>\r\n                </failure>\r\n              </test-case>\r\n              <test-case name=\"NUnitTest.Class1.SampleTest2\" description=\"Description2\" executed=\"True\" result=\"Error\" success=\"False\" time=\"0.002\" asserts=\"0\">\r\n                <failure>\r\n                  <message><![CDATA[System.Exception : Throwing an new exception!!]]></message>\r\n                  <stack-trace><![CDATA[at NUnitTest.Class1.SampleTest2() in E:\\NUnitTest\\Class1.cs:line 23\r\n]]></stack-trace>\r\n                </failure>\r\n              </test-case>\r\n              <test-case name=\"NUnitTest.Class1.SampleTest3\" description=\"Description3\" executed=\"True\" result=\"Success\" success=\"True\" time=\"0.000\" asserts=\"0\" />\r\n              <test-case name=\"NUnitTest.Class1.SampleTest4\" description=\"Description4\" executed=\"True\" result=\"Success\" success=\"True\" time=\"0.000\" asserts=\"0\" />\r\n            </results>\r\n          </test-suite>\r\n        </results>\r\n      </test-suite>\r\n    </results>\r\n  </test-suite>\r\n</test-results>\r\n</pre>\r\n\r\n<p><span><span>于是按照解析mstest测试结果的工具trx2html所生成的html报告的样子，自己写了下面的xslt来解析：</span></span></p>\r\n\r\n<pre class=\"brush: xml\">\r\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\r\n<xsl:stylesheet version=\"1.0\" xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\">\r\n    <xsl:template match=\"/\">\r\n    <html>\r\n        <head>\r\n            <title>@@Title@@</title>\r\n            <style type=\'text/css\'>\r\n                body, td, th {font:Verdana;vertical-align:top;text-align:left}\r\n                body {margin:0px 0px 0px 15px}\r\n                hr {margin:0px 0px 0px -15px;border:solid 1pt #dcdcdc}\r\n                table {border-collapse:collapse;border:solid 1px #a9a9a9}\r\n                th {background-color:#dcdcdc;border:solid 1px #a9a9a9;text-indent:2pt;font-weight:bolder}\r\n                td {border:solid 1px #a9a9a9}\r\n \r\n                span.ok{background-color:lime;color:black;font-size:40%;color:lime;display:inline-block;}\r\n                span.ko{background-color:red;color:white;font-size:40%;color:red;display:inline-block;}\r\n                span.ignore{background-color:yellow;color:white;font-size:40%;color:yellow;display:inline-block;}\r\n \r\n                p.testKo{\r\n                cursor:hand;\r\n                width:40px;\r\n                height:40px;\r\n                background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAUCAIAAAAGHlpnAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAPBSURBVDhPY/hPMWDANOHXu1fvTx94v3bmy3kdT6bXP51c9XRi5ctpzS8O7vz57jWmehQj/v398+XKqXfLJ79Z0P5pUce3Re2/5jX9nFn9pb/odUv6w/Koh03Zb88dRzMF2Yh/3y4ce7uw89Pizt+r+v8s7fw1t/7ntIqfEwt/duX8akn5Vhf1MM/3WrrPkz2bkE1BGPH1xvk381q/LO36vbLv18LmX9PKf/bl/ehM/9mc+KM+5nt1+LfywM8FXg8SbM9E2rw8ewxuCtSIv5/ev10+6cOC1t/Lu/+c3g2R/jmz9kdVyM9JxVDuxrmfMhzeJ5pfCNI7kRP++/s3iDjUiK+n9r2eUftrcftvoOMn5P97dh8o9/fJne/VYX8f3QKxH978mGr7IcHiTbThoxDt7c5q97au+fv7N8KIN8snf5ha8WtO/Y9JRT9ak35OLYfY8O/NMxD59dOX8uAP8aZvow2eh2o98lfb7yh/tCTpz9fPCCOeTq7+Mrn0x6Tin51pP2ojvxX7/to0F+7b7ws63scav4vUfx2i+cRP5a6n/FF7qQ2hjj9fv0AYca8950d//o/uzB9Nsd/K/b/muX8tCYAb8SHd4W247psQjZf+yo885W65SJ2wEV3kbvTlznWEEbca0r61pX5vjv9WFfo13+NLluPvM/vhRvw8tuNNkPorP6VnXnL3nSWu2oscNheYY6/98co5hBF3GtLfV4Z/B+ov9P2a6fxz7XSI/u+b5kEYXxZ0vvSUfeQscdNO+Jwl/2YDnoVOel/ug0IaGiMP+2seZ7p/LwDa7/S1Kuzfl09AuR8b574N1vi+cwUoRD9/eBlnds9O+JIF/0lTngWanNsyI/58BimDGvH64PYLMTZvUm0/Jln+unISFIsvHr+NM33tr/Q6XPfPs4cgF505cNWC76Qx1y5djn413ht7d/77+xdhxO9PHy5Wpp4PNnoeafg8TPdZkOazANVnPgrPPGSfuog/chS9ayN4xZz7hBHHXj3W2Socy+P8/4ATBcIIIOvlhVOHwm1PeGnc9lW946V420P2tovkTQexG7aCVyx5z5lxHTPk2KPLMl+VdZql2sNLF+CBjZJTb2/fsMXLcIe93Dkn6YsOEudtRM5ZCZwx4z1mxHlQn22bFutMZdYpBtLnt26E60dxBUT0wZH922PcF5rJrDYU3mrIt8eQZ7sO1xoN9nmq7P1KnHOcDZ8f3YesH4sRoGB78+rKqkWbkoNmOehOsFTvtVSfYqm62Nvi9KS2T08foenHbgSmIvwiACPu1otCSuPAAAAAAElFTkSuQmCC);\r\n                background-repeat:no-repeat\r\n                }                \r\n                p.testOk{\r\n                cursor:hand;\r\n                width:40px;\r\n                height:40px;\r\n                background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAMTSURBVDhPpdTrL5tRGABw/80+LCKzGHHJqEt19KWoy2sW0a5D0a6hVcWoKu26Tlt1p1Uzd6WoqdVtQ0vEZW6xi2UXsw3r0FKq3ZHKeGUfljgfTvKcnF+ec3nOcbBdoTlcwdou40+/PopHH5M74sk98TQNiTbwIFF5l/AspnRE+O33xqVMCDz+YZSiJNS9kejML7XW7o49heyLRPqWx5t9lNabAEl9VXMdF/05nlx/laFOntjVLNp0mpPOpu2qinWBcInDm83h6JlsPYMxmOwvdG+davzrz/DW/k+mmqI3audt471HLfWbUtEKt3g2m62n502ms8aoJCVM6U8gq+K9i1zefV+z+zPct9QlneMt2CbUx62yjVLhIrtAz8h9TWONpmWOpOLlgUINV7XaTu0hRlRj0ptTEZimSho6UA1alYrNspJlDkjIGqMwhlPp2mRcbUC+imk5sZgth6x+WqwiNLgEhcDUgfv9lrbmnRrRKjdjKDFrNI0xlJKhJUfUBWYr0/cP944sR5U6UVwjLlaB8+a7IDBdS+4yNoITki7zRSM8WAFlDqfg5RhmB/Xw+ABMrdZJIhvuwIoQWB7iK3BDYEofESy4eD57Zkt3bDlmd2ehSz0y2ykms8lqtVZPlUUqMEBG1WHxNUE+fFcEJrZHi1YKOdPMp9PcXbPBZDYWdLNMR0YwqUYvDZej4QYoqi4ovCowtDzAi+uMwLm9dLaOXqBjUDUEsY5nXypotfqyMHlAjAKKkmGBDCnzDxb7YAS3EXhwWU3qjM0Ze5g+kJigjJTNVHw1fC7S5obL0HA9FuSMOJV+kAQF7lmsESCwwWSIKscS26IpfYQkZVxcM47YAoOjjpaDTWJwlWhI6hcsQaGfeLrmOa5triIwCNQLKh/erbiGMFIbHP8cD8ux0TIsKAlcBRoq9Q0WowIEns7Z10pe8C+Xpz3WLKqhEn9QwJAUFVaBxlcHgR57mtDLvcDJJfe6RCP898Owj+7sb7dPN5Fk99zyHd3ZTh6FN0DvxblJries/3h/UZ7X9qXR/wyv9JP8AUelhZbR6oNqAAAAAElFTkSuQmCC);\r\n                background-repeat:no-repeat\r\n                }\r\n                p.testIgnore{\r\n                cursor:hand;\r\n                width:40px;\r\n                height:40px;\r\n                background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAIAAAAf7rriAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAJeSURBVDhPY/hPAWDApfff328EjcWu+de3J49PWD47a3lym/Xlk0txmYJd89s7kz48UvnxLfDKEb4p1ZJ//vzGqh+L5r+/Pzw5ZfLvj+P//57//0tOreY+f2QWsZo/Pel9f8/h3//QRw9k//6TO7aTc26rGlGa//x8+vK83f+/BQsW+SnKa/d1G/z/zzetmvPCifWY+tGd/eH+1E/3ff//r01MtmFg8A3xsv7/X2j/GqbZLToENP/99fHJSZd/v5r+/8/sbjNkYkiY1a3+/z//15fcE8q47t44jqYfxeZPj2e/ueXz/3/v//+uuzbJKfA3Xjyi9P8Py9/v4ptnsM7rcsCp+d/fj8/Oevz6Vvz/f97//2pHDonqyMfdvSL4/wPDrw+ib66z9ZdyPn9yB1k/wubvr5a9ugb0IVCnw/+//FcvcCV46jy/yfb/GcPPR7x/Pois6GFeNTMSi+Z/fz68OOf+/bPX//9u/z9L/H/J+v8z07NznP/fMvy/w/DzCtOv95JPz3NOLOP9/u0DXD/U5q/PV7w6L/fvv+X/TzL/H7D/e8O8eBqLvy/7poXsQJt/nWP4eovn71vRpe2sy2fEomj+8Pb+9e0W3+9I//8s9f8W2/9bzN+fMViZMjIwxBWnJP5/wfDrLMP3c4x/ngg+Pcg0sd4eRfPrp2e3T+d/tIf7xWG2J7uZHu1gen6IcXk3U1WK2/k1Zo/3MN7Zwnh/K+OjXUwv9jGu6xdH0fz719cbh9Jn1LBPLmMDoklgcloVELFOqWCdVAZEIBEgmlrJuqBDE93PBLMuUWmbJFMAIcChwBwUNxQAAAAASUVORK5CYII=);\r\n                background-repeat:no-repeat\r\n                }\r\n                div.barContainer{width:100%;border:solid 1px black}\r\n                div.trace{font:100% Courier}\r\n                div.border{border:dotted 1px #dcdcdc;padding:2px 2px 2px 2px}\r\n                div.contents{border:dotted 1px #dcdcdc;padding:2px 2px 2px 2px;background-color:#efefef}\r\n            </style>\r\n        </head>\r\n        <body>\r\n            <a name=\'__top\' />\r\n            <h3>@@Title@@</h3>\r\n            <div class=\'contents\'>\r\n                Summary\r\n            </div>\r\n            <br />\r\n            <a name=\'totals\' />\r\n            <table id=\'tMainSummary\'  border=\'0\' width=\'900px\'>\r\n                <tr>\r\n                    <th>Percent</th>\r\n                    <th>Status</th>\r\n                    <th>TotalTests</th>\r\n                    <th>Errors</th>\r\n                    <th>Failures</th>\r\n                    <th>NotRun</th>\r\n                    <th>Inconclusive</th>\r\n                    <th>Ignored</th>\r\n                    <th>Skipped</th>\r\n                    <th>Invalid</th>\r\n                    <th>TimeTaken</th>\r\n                </tr>\r\n                <tr>\r\n                    <xsl:apply-templates />\r\n                </tr>\r\n            </table>\r\n            <br />\r\n            <br />\r\n            <div class=\'contents\'>\r\n                Detail\r\n            </div>\r\n            <br />\r\n            <table id=\"tSlowerMethods\" border=\'0\' width=\'900px\'>\r\n                <tr>\r\n                    <th>TestMethod</th>\r\n                    <th colspan=\'2\'>Status</th>\r\n                    <th>Duration</th>\r\n                </tr>\r\n                <xsl:for-each select=\"//test-case\">\r\n                    <tr>\r\n                        <td><xsl:value-of select=\"@name\"/></td>\r\n                        <td>\r\n                            <xsl:choose>\r\n                                <xsl:when test=\"@result = \'Success\'\">\r\n                                    <p class=\'testOk\'></p>\r\n                                </xsl:when>\r\n                                <xsl:otherwise>\r\n                                    <p class=\'testKo\'></p>\r\n                                </xsl:otherwise>\r\n                            </xsl:choose>\r\n                        </td>\r\n                        <td width=\'100%\'>\r\n                            <xsl:value-of select=\"@description\"/><br />\r\n                            <xsl:value-of select=\"failure/message\"/><br />\r\n                            <xsl:value-of select=\"failure/stack-trace\"/>\r\n                        </td>\r\n                        <td><xsl:value-of select=\"@time\"/></td>\r\n                    </tr>\r\n                </xsl:for-each>\r\n            </table>\r\n        </body>\r\n    </html>\r\n    </xsl:template>\r\n \r\n    <xsl:template match=\"test-results\">\r\n        <td>\r\n            <xsl:value-of \r\n                select=\"round(((number(@total)-number(@errors)-number(@failures)-number(@not-run)-number(@inconclusive)-number(@ignored)-number(@skipped)-number(@invalid)) div @total) * 100)\"/>%\r\n        </td>\r\n        <td width=\'350px\' style=\'vertical-align:middle;font-size:200%\'>\r\n            <div class=\"barContainer\">\r\n                <span class=\"ok\" title=\"Passed!\">\r\n                    <xsl:attribute name=\"style\">\r\n                        width:<xsl:value-of select=\"round(((number(@total)-number(@errors)-number(@failures)-number(@not-run)-number(@inconclusive)-number(@ignored)-number(@skipped)-number(@invalid)) div @total) * 100)\"/>%\r\n                </xsl:attribute>p</span>\r\n                <span class=\"ko\" title=\"Failed\">\r\n                    <xsl:attribute name=\"style\">\r\n                        width:<xsl:value-of select=\"100-round(((number(@total)-number(@errors)-number(@failures)-number(@not-run)-number(@inconclusive)-number(@ignored)-number(@skipped)-number(@invalid)) div @total) * 100)\"/>%\r\n                    </xsl:attribute>\r\n                    f</span>\r\n            </div>\r\n        </td>\r\n        <td><xsl:value-of select=\"@total\"/></td>\r\n        <td><xsl:value-of select=\"@errors\"/></td>\r\n        <td><xsl:value-of select=\"@failures\"/></td>\r\n        <td><xsl:value-of select=\"@not-run\"/></td>\r\n        <td><xsl:value-of select=\"@inconclusive\"/></td>\r\n        <td><xsl:value-of select=\"@ignored\"/></td>\r\n        <td><xsl:value-of select=\"@skipped\"/></td>\r\n        <td><xsl:value-of select=\"@invalid\"/></td>\r\n        <td><xsl:value-of select=\"@date\"/> <xsl:value-of select=\"@time\"/></td>\r\n    </xsl:template>\r\n    </xsl:stylesheet>\r\n\r\n</pre>\r\n\r\n<p><span>其中css样式是抄trx2html报告的，并做了一些改动。</span><br><br><span>这是解析后的样子：</span></p>\r\n<p>\r\n<a href=\"/resources/28-151508065481160.png\" data-lightbox=\"image-1\"    data-title=\"\"><img src=\"/resources/28-151508065481160.png\" /></a><br/>\r\n</p>\r\n<p><span><span>加了个@@Title@@可以在解析代码中替换为想要的标题。</span><br><br><span>好了，之后就写个工具解析和生成html report文件吧：</span></span></p>\r\n\r\n<pre class=\"brush: csharp\">\r\nusing System.IO;\r\nusing System.Xml;\r\nusing System.Xml.Xsl;\r\n \r\nnamespace NUnitHtmlTestResultParser\r\n{\r\n    class Program\r\n    {\r\n        static int Main(string[] args)\r\n        {\r\n            if (args.Length != 3)\r\n            {\r\n                Console.WriteLine(HelpInfo());\r\n                return 1;\r\n            }\r\n            if (!File.Exists(args[0]))\r\n            {\r\n                Console.WriteLine(\"Can not find result file \" + args[0]);\r\n                Console.WriteLine(HelpInfo());\r\n                return 2;\r\n            }\r\n            try\r\n            {\r\n                XmlDocument xDoc = new XmlDocument();\r\n                xDoc.Load(args[0]);\r\n                string returnhtml = ConvertXML(xDoc, @\"nunitresult.xslt\", new XsltArgumentList()).Replace(\"@@Title@@\", args[2]);\r\n                using (TextWriter tw = new StreamWriter(args[1]))\r\n                {\r\n                    tw.Write(returnhtml);\r\n                }\r\n                Console.WriteLine(\"Done!!\");\r\n            }\r\n            catch (Exception e)\r\n            {\r\n                Console.WriteLine(e.Message);\r\n                Console.WriteLine(HelpInfo());\r\n                return 1;\r\n            }\r\n            return 0;\r\n        }\r\n \r\n        private static string HelpInfo()\r\n        {\r\n            return \"Usage: NUnitHtmlTestResultParser.exe SOURCE DEST TITLE\" + System.Environment.NewLine +\r\n                \"SOURCE is nunit test result file\" + System.Environment.NewLine +\r\n                \"DEST is parsed html test result file\" + System.Environment.NewLine +\r\n                \"TITLE is test report title\" + System.Environment.NewLine;\r\n        }\r\n \r\n        private static string ConvertXML(XmlDocument InputXMLDocument, string XSLTFilePath\r\n, XsltArgumentList XSLTArgs)\r\n        {\r\n            using (StringWriter sw = new StringWriter())\r\n            {\r\n                XslCompiledTransform xslTrans = new XslCompiledTransform();\r\n                xslTrans.Load(XSLTFilePath);\r\n                xslTrans.Transform(InputXMLDocument.CreateNavigator(), XSLTArgs, sw);\r\n                return sw.ToString();\r\n            }\r\n        }\r\n    }\r\n}\r\n</pre>\r\n\r\n<p><span><span>好了，试试这个工具：</span><br><span>$ NUnitHtmlTestResultParser.exe result.xml result.html “Test result for abc”</span><br><span>$ Done!!</span></span></p>\r\n<p> </p>\r\n<p><span><span>打开result.html看看：</span><br>\r\n<a href=\"/resources/28-151509162982650.png\" data-lightbox=\"image-1\"    data-title=\"\"><img src=\"/resources/28-151509162982650.png\" /></a><br/>\r\n<br><span>由于我的测试结果是要通过邮件发出的，并且都是通过outlook收发邮件的，如果以上面这种html直接发到邮箱里面的话，展现的结果是这个鬼样子：</span><br>\r\n\r\n<a href=\"/resources/28-151510172204405.png\" data-lightbox=\"image-1\"    data-title=\"\"><img src=\"/resources/28-151510172204405.png\" /></a><br/>\r\n<br><span>好吧，继续修改之前的xslt，使其能在outlook中显示正常：</span></span></p>\r\n<p> </p>\r\n<p><span> </span></p>\r\n\r\n<pre class=\"brush: xml\">\r\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\r\n<xsl:stylesheet version=\"1.0\" xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\">\r\n    <xsl:template match=\"/\">\r\n    <html>\r\n        <head>\r\n            <title>@@Title@@</title>\r\n            <style type=\'text/css\'>\r\n                body, td, th {font:Verdana;vertical-align:top;text-align:left}\r\n                body {margin:0px 0px 0px 15px}\r\n                hr {margin:0px 0px 0px -15px;border:solid 1pt #dcdcdc}\r\n                table {border-collapse:collapse;border:solid 1px #a9a9a9}\r\n                th {background-color:#dcdcdc;border:solid 1px #a9a9a9;text-indent:2pt;font-weight:bolder}\r\n                td {border:solid 1px #a9a9a9}\r\n \r\n                span.ok{background-color:lime;color:black;font-size:40%;color:lime;display:inline-block;}\r\n                span.ko{background-color:red;color:white;font-size:40%;color:red;display:inline-block;}\r\n                span.ignore{background-color:yellow;color:white;font-size:40%;color:yellow;display:inline-block;}\r\n \r\n                p.testKo{\r\n                cursor:hand;\r\n                width:40px;\r\n                height:40px;\r\n                background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAUCAIAAAAGHlpnAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAPBSURBVDhPY/hPMWDANOHXu1fvTx94v3bmy3kdT6bXP51c9XRi5ctpzS8O7vz57jWmehQj/v398+XKqXfLJ79Z0P5pUce3Re2/5jX9nFn9pb/odUv6w/Koh03Zb88dRzMF2Yh/3y4ce7uw89Pizt+r+v8s7fw1t/7ntIqfEwt/duX8akn5Vhf1MM/3WrrPkz2bkE1BGPH1xvk381q/LO36vbLv18LmX9PKf/bl/ehM/9mc+KM+5nt1+LfywM8FXg8SbM9E2rw8ewxuCtSIv5/ev10+6cOC1t/Lu/+c3g2R/jmz9kdVyM9JxVDuxrmfMhzeJ5pfCNI7kRP++/s3iDjUiK+n9r2eUftrcftvoOMn5P97dh8o9/fJne/VYX8f3QKxH978mGr7IcHiTbThoxDt7c5q97au+fv7N8KIN8snf5ha8WtO/Y9JRT9ak35OLYfY8O/NMxD59dOX8uAP8aZvow2eh2o98lfb7yh/tCTpz9fPCCOeTq7+Mrn0x6Tin51pP2ojvxX7/to0F+7b7ws63scav4vUfx2i+cRP5a6n/FF7qQ2hjj9fv0AYca8950d//o/uzB9Nsd/K/b/muX8tCYAb8SHd4W247psQjZf+yo885W65SJ2wEV3kbvTlznWEEbca0r61pX5vjv9WFfo13+NLluPvM/vhRvw8tuNNkPorP6VnXnL3nSWu2oscNheYY6/98co5hBF3GtLfV4Z/B+ov9P2a6fxz7XSI/u+b5kEYXxZ0vvSUfeQscdNO+Jwl/2YDnoVOel/ug0IaGiMP+2seZ7p/LwDa7/S1Kuzfl09AuR8b574N1vi+cwUoRD9/eBlnds9O+JIF/0lTngWanNsyI/58BimDGvH64PYLMTZvUm0/Jln+unISFIsvHr+NM33tr/Q6XPfPs4cgF505cNWC76Qx1y5djn413ht7d/77+xdhxO9PHy5Wpp4PNnoeafg8TPdZkOazANVnPgrPPGSfuog/chS9ayN4xZz7hBHHXj3W2Socy+P8/4ATBcIIIOvlhVOHwm1PeGnc9lW946V420P2tovkTQexG7aCVyx5z5lxHTPk2KPLMl+VdZql2sNLF+CBjZJTb2/fsMXLcIe93Dkn6YsOEudtRM5ZCZwx4z1mxHlQn22bFutMZdYpBtLnt26E60dxBUT0wZH922PcF5rJrDYU3mrIt8eQZ7sO1xoN9nmq7P1KnHOcDZ8f3YesH4sRoGB78+rKqkWbkoNmOehOsFTvtVSfYqm62Nvi9KS2T08foenHbgSmIvwiACPu1otCSuPAAAAAAElFTkSuQmCC);\r\n                background-repeat:no-repeat\r\n                }                \r\n                p.testOk{\r\n                cursor:hand;\r\n                width:40px;\r\n                height:40px;\r\n                background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAMTSURBVDhPpdTrL5tRGABw/80+LCKzGHHJqEt19KWoy2sW0a5D0a6hVcWoKu26Tlt1p1Uzd6WoqdVtQ0vEZW6xi2UXsw3r0FKq3ZHKeGUfljgfTvKcnF+ec3nOcbBdoTlcwdou40+/PopHH5M74sk98TQNiTbwIFF5l/AspnRE+O33xqVMCDz+YZSiJNS9kejML7XW7o49heyLRPqWx5t9lNabAEl9VXMdF/05nlx/laFOntjVLNp0mpPOpu2qinWBcInDm83h6JlsPYMxmOwvdG+davzrz/DW/k+mmqI3audt471HLfWbUtEKt3g2m62n502ms8aoJCVM6U8gq+K9i1zefV+z+zPct9QlneMt2CbUx62yjVLhIrtAz8h9TWONpmWOpOLlgUINV7XaTu0hRlRj0ptTEZimSho6UA1alYrNspJlDkjIGqMwhlPp2mRcbUC+imk5sZgth6x+WqwiNLgEhcDUgfv9lrbmnRrRKjdjKDFrNI0xlJKhJUfUBWYr0/cP944sR5U6UVwjLlaB8+a7IDBdS+4yNoITki7zRSM8WAFlDqfg5RhmB/Xw+ABMrdZJIhvuwIoQWB7iK3BDYEofESy4eD57Zkt3bDlmd2ehSz0y2ykms8lqtVZPlUUqMEBG1WHxNUE+fFcEJrZHi1YKOdPMp9PcXbPBZDYWdLNMR0YwqUYvDZej4QYoqi4ovCowtDzAi+uMwLm9dLaOXqBjUDUEsY5nXypotfqyMHlAjAKKkmGBDCnzDxb7YAS3EXhwWU3qjM0Ze5g+kJigjJTNVHw1fC7S5obL0HA9FuSMOJV+kAQF7lmsESCwwWSIKscS26IpfYQkZVxcM47YAoOjjpaDTWJwlWhI6hcsQaGfeLrmOa5triIwCNQLKh/erbiGMFIbHP8cD8ux0TIsKAlcBRoq9Q0WowIEns7Z10pe8C+Xpz3WLKqhEn9QwJAUFVaBxlcHgR57mtDLvcDJJfe6RCP898Owj+7sb7dPN5Fk99zyHd3ZTh6FN0DvxblJries/3h/UZ7X9qXR/wyv9JP8AUelhZbR6oNqAAAAAElFTkSuQmCC);\r\n                background-repeat:no-repeat\r\n                }\r\n                p.testIgnore{\r\n                cursor:hand;\r\n                width:40px;\r\n                height:40px;\r\n                background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAIAAAAf7rriAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAJeSURBVDhPY/hPAWDApfff328EjcWu+de3J49PWD47a3lym/Xlk0txmYJd89s7kz48UvnxLfDKEb4p1ZJ//vzGqh+L5r+/Pzw5ZfLvj+P//57//0tOreY+f2QWsZo/Pel9f8/h3//QRw9k//6TO7aTc26rGlGa//x8+vK83f+/BQsW+SnKa/d1G/z/zzetmvPCifWY+tGd/eH+1E/3ff//r01MtmFg8A3xsv7/X2j/GqbZLToENP/99fHJSZd/v5r+/8/sbjNkYkiY1a3+/z//15fcE8q47t44jqYfxeZPj2e/ueXz/3/v//+uuzbJKfA3Xjyi9P8Py9/v4ptnsM7rcsCp+d/fj8/Oevz6Vvz/f97//2pHDonqyMfdvSL4/wPDrw+ib66z9ZdyPn9yB1k/wubvr5a9ugb0IVCnw/+//FcvcCV46jy/yfb/GcPPR7x/Pois6GFeNTMSi+Z/fz68OOf+/bPX//9u/z9L/H/J+v8z07NznP/fMvy/w/DzCtOv95JPz3NOLOP9/u0DXD/U5q/PV7w6L/fvv+X/TzL/H7D/e8O8eBqLvy/7poXsQJt/nWP4eovn71vRpe2sy2fEomj+8Pb+9e0W3+9I//8s9f8W2/9bzN+fMViZMjIwxBWnJP5/wfDrLMP3c4x/ngg+Pcg0sd4eRfPrp2e3T+d/tIf7xWG2J7uZHu1gen6IcXk3U1WK2/k1Zo/3MN7Zwnh/K+OjXUwv9jGu6xdH0fz719cbh9Jn1LBPLmMDoklgcloVELFOqWCdVAZEIBEgmlrJuqBDE93PBLMuUWmbJFMAIcChwBwUNxQAAAAASUVORK5CYII=);\r\n                background-repeat:no-repeat\r\n                }\r\n                div.barContainer{width:100%;border:solid 1px black}\r\n                div.trace{font:100% Courier}\r\n                div.border{border:dotted 1px #dcdcdc;padding:2px 2px 2px 2px}\r\n                div.contents{border:dotted 1px #dcdcdc;padding:2px 2px 2px 2px;background-color:#efefef}\r\n            </style>\r\n        </head>\r\n        <body>\r\n            <a name=\'__top\' />\r\n            <h3>@@Title@@</h3>\r\n            <div class=\'contents\'>\r\n                Summary\r\n            </div>\r\n            <br />\r\n            <a name=\'totals\' />\r\n            <table id=\'tMainSummary\'  border=\'0\' width=\"1000\">\r\n                <tr>\r\n        <th width=\"40\">Percent</th>\r\n        <th width=\"150\">Status</th>\r\n        <th width=\"40\">TotalTests</th>\r\n        <th width=\"40\">Errors</th>\r\n        <th width=\"40\">Failures</th>\r\n        <th width=\"40\">NotRun</th>\r\n        <th width=\"40\">Inconclusive</th>\r\n        <th width=\"40\">Ignored</th>\r\n        <th width=\"40\">Skipped</th>\r\n        <th width=\"40\">Invalid</th>\r\n        <th width=\"40\">TimeTaken</th>\r\n                </tr>\r\n                <tr>\r\n                    <xsl:apply-templates />\r\n                </tr>\r\n            </table>\r\n            <br />\r\n            <br />\r\n            <div class=\'contents\'>\r\n                Detail\r\n            </div>\r\n            <br />\r\n            <table id=\"tSlowerMethods\" border=\'0\' width=\"1000\">\r\n                <tr>\r\n                    <th width=\"202\">TestMethod</th>\r\n                    <th width=\"58\">Status</th>\r\n                    <th width=\"661\">Message</th>\r\n                    <th width=\"79\">Duration</th>\r\n                </tr>\r\n                <xsl:for-each select=\"//test-case\">\r\n                    <tr>\r\n                        <td><xsl:value-of select=\"@name\"/></td>\r\n                        <td>\r\n                            <xsl:choose>\r\n                                <xsl:when test=\"@result = \'Success\'\">\r\n                                    <div style=\"color: #008000; font-weight: bolder\">PASS</div>\r\n                                </xsl:when>\r\n                                <xsl:otherwise>\r\n                                    <div style=\"color: #FF0000; font-weight: bolder\">FAIL</div>\r\n                                </xsl:otherwise>\r\n                            </xsl:choose>\r\n                        </td>\r\n                        <td>\r\n                            <xsl:value-of select=\"@description\"/><br />\r\n                            <xsl:value-of select=\"failure/message\"/><br />\r\n                            <xsl:value-of select=\"failure/stack-trace\"/>\r\n                        </td>\r\n                        <td><xsl:value-of select=\"@time\"/></td>\r\n                    </tr>\r\n                </xsl:for-each>\r\n            </table>\r\n        </body>\r\n    </html>\r\n    </xsl:template>\r\n \r\n    <xsl:template match=\"test-results\">\r\n        <td>\r\n            <xsl:value-of \r\n                select=\"round(((number(@total)-number(@errors)-number(@failures)-number(@not-run)-number(@inconclusive)-number(@ignored)-number(@skipped)-number(@invalid)) div @total) * 100)\"/>%\r\n        </td>\r\n        <td width=\'350px\' style=\'vertical-align:middle;font-size:200%\'>\r\n                    <table border=\"0\" width=\"100%\">\r\n                        <tr>\r\n                            <xsl:choose>\r\n                                <xsl:when test=\"round(((number(@total)-number(@errors)-number(@failures)-number(@not-run)-number(@inconclusive)-number(@ignored)-number(@skipped)-number(@invalid)) div @total) * 100) = 100\">\r\n                                    <td bgcolor=\"Green\" style=\"color: #008000\" width=\"100%\">P</td>\r\n                                </xsl:when>\r\n                                <xsl:when test=\"round(((number(@total)-number(@errors)-number(@failures)-number(@not-run)-number(@inconclusive)-number(@ignored)-number(@skipped)-number(@invalid)) div @total) * 100) = 0\">\r\n                                    <td bgcolor=\"Red\" style=\"color: #FF0000\" width=\"100%\">F</td>\r\n                                </xsl:when>\r\n                                <xsl:otherwise>\r\n                                    <td bgcolor=\"Green\" style=\"color: #008000\"><xsl:attribute name=\"width\"><xsl:value-of select=\"round(((number(@total)-number(@errors)-number(@failures)-number(@not-run)-number(@inconclusive)-number(@ignored)-number(@skipped)-number(@invalid)) div @total) * 100)\"/>%</xsl:attribute>P</td>\r\n                                    <td bgcolor=\"Red\" style=\"color: #FF0000\"><xsl:attribute name=\"width\">\r\n                                            <xsl:value-of select=\"100-round(((number(@total)-number(@errors)-number(@failures)-number(@not-run)-number(@inconclusive)-number(@ignored)-number(@skipped)-number(@invalid)) div @total) * 100)\"/>%</xsl:attribute>F</td>\r\n                                </xsl:otherwise>\r\n                            </xsl:choose>\r\n                        </tr>\r\n                    </table>\r\n        </td>\r\n        <td><xsl:value-of select=\"@total\"/></td>\r\n        <td><xsl:value-of select=\"@errors\"/></td>\r\n        <td><xsl:value-of select=\"@failures\"/></td>\r\n        <td><xsl:value-of select=\"@not-run\"/></td>\r\n        <td><xsl:value-of select=\"@inconclusive\"/></td>\r\n        <td><xsl:value-of select=\"@ignored\"/></td>\r\n        <td><xsl:value-of select=\"@skipped\"/></td>\r\n        <td><xsl:value-of select=\"@invalid\"/></td>\r\n        <td><xsl:value-of select=\"@date\"/> <xsl:value-of select=\"@time\"/></td>\r\n    </xsl:template>\r\n \r\n    </xsl:stylesheet>\r\n</pre>\r\n\r\n<p><span>好了，再通过outlook看看：</span><br>\r\n<a href=\"/resources/28-151510334544878.png\" data-lightbox=\"image-1\"    data-title=\"\"><img src=\"/resources/28-151510334544878.png\" /></a><br/>\r\n<br><span>搞定。</span></p>\r\n<p><span> </span></p></div>','2016-06-21 09:51:39','2016-06-21 07:44:50','PUBLISHED',9,'peng',6,'HTML'),(29,'Selenium Web Test解耦UI变化','使用Selenium进行Web UI的自动化测试是很好的选择，它支持多种语言来实现你的测试代码，也支持多种浏览器。我选择的是Selenium Web Dirver + C# + FireFox来进行开发，并且采用PageObject design pattern来组织代码，每个page对象使用page factory工厂方法生成。','<p>使用Selenium进行Web UI的自动化测试是很好的选择，它支持多种语言来实现你的测试代码，也支持多种浏览器。我选择的是Selenium Web Dirver + C# + FireFox来进行开发，并且采用PageObject design pattern来组织代码，每个page对象使用page factory工厂方法生成。</p>\r\n<p>下面的示例是描述登录页面的LoginPage类：</p>\r\n\r\n<br/>\r\n\r\n<script type=\"syntaxhighlighter\" class=\"brush: c#\">\r\nclass LoginPage\r\n{\r\n    private IWebDriver driver;\r\n \r\n    [FindsBy(How = How.XPath, Using = \"//input[@type=\'text\' and @name=\'userName\']\")]\r\n    private IWebElement txtUserName;\r\n \r\n    [FindsBy(How = How.Name, Using = \"userName\")]\r\n    private IWebElement txtPassword;\r\n \r\n    [FindsBy(How = How.Name, Using = \"login\")]\r\n    private IWebElement btnLogin;\r\n \r\n    public LoginPage(IWebDriver driver)\r\n    {\r\n        this.driver = driver;\r\n    }\r\n \r\n    public FindFlightsPage Do(string UserName, string Password)\r\n    {\r\n        txtUserName.SendKeys(UserName);\r\n        txtPasswowrd.SendKeys(Password);\r\n        btnLogin.Click();\r\n \r\n        return new FindFlightsPage(driver);\r\n    }\r\n}\r\n</script>\r\n\r\n<br/>\r\n<p>可以看到，每个IWebElement私有成员都描述一个LoginPage中的元素，并且使用“FindsBy”特性来描述如何定位当前元素在页面中的位置。这样，我们就可以通过Selenium提供的PageFactory类来生成对应的Page对象了：</p>\r\n\r\n<script type=\"syntaxhighlighter\" class=\"brush: c#\">\r\nclass Program\r\n{\r\n    static void Main()\r\n    {\r\n        IWebDriver driver = new FirefoxDriver();\r\n        driver.Navigate().GoToUrl(\"http://newtours.demoaut.com\");\r\n \r\n        LoginPage Login = new LoginPage(driver);\r\n \r\n        // initialize elements of the LoginPage class\r\n        PageFactory.InitElements(driver, Login);\r\n        // all elements in the \'WebElements\' region are now alive!\r\n        // FindElement or FindElements no longer required to locate elements\r\n \r\n        FindFlightsPage FindFlights = Login.Do(\"User\", \"Pass\");\r\n        driver.Quit();\r\n    }\r\n}\r\n</script>\r\n\r\n<p>但是这样实现的LoginPage类，如果被测系统在UI上面有变化，比如元素的ID或Name有变化，页面的结构有变化，我们就需要更改LoginPage类中的“FindsBy”特性的内容，并且重新编译测试代码，重新部署测试代码到测试环境，而且这种情况在项目初期会经常出现，势必会导致每天花费大量时间来重新更换测试环境。</p>\r\n<p>下面介绍我使用的方法，来解开页面UI的描述信息和Page类之间的耦合。\r\n这是我写的LoginPage类：</p>\r\n\r\n<script type=\"syntaxhighlighter\" class=\"brush: c#\">\r\nusing System;\r\nusing System.Collections.Generic;\r\nusing System.Linq;\r\nusing System.Text;\r\nusing System.Threading;\r\n \r\nusing OpenQA.Selenium;\r\nusing OpenQA.Selenium.Interactions;\r\nusing OpenQA.Selenium.Support.PageObjects;\r\nusing Selenium.Tools;\r\n \r\nnamespace WebTest.TestFramework\r\n{\r\n    public class LoginPage : PageBase\r\n    {\r\n        [NeedRefresh]\r\n        public IWebElement UserNameInput { get; set; }\r\n        [NeedRefresh]\r\n        public IWebElement PassWordInput { get; set; }\r\n        public IWebElement SelectLanguageLinkBar { get; set; }\r\n        public IWebElement EnglisghLanguageLink { get; set; }\r\n \r\n        public LoginPage(IWebDriver driver)\r\n        {\r\n            this.webDriver = driver;\r\n        }\r\n \r\n        public void Login(string userName, string passwd)\r\n        {\r\n            this.UserNameInput.SendKeys(userName);\r\n            this.PassWordInput.SendKeys(passwd);\r\n            this.UserNameInput.Submit();\r\n        }\r\n \r\n        public void SelectLanguage(LanguageType type)\r\n        {\r\n            Actions actions = new Actions(this.webDriver);\r\n            actions.MoveToElement(SelectLanguageLinkBar);\r\n            actions.MoveToElement(EnglisghLanguageLink);\r\n            actions.Click();\r\n            actions.Perform();\r\n        }\r\n    }\r\n}\r\n</script>\r\n<br/>\r\n<p>抽象出一个PageBase类：</p>\r\n<script type=\"syntaxhighlighter\" class=\"brush: c#\">\r\nusing System;\r\nusing System.Collections.Generic;\r\nusing System.Linq;\r\nusing System.Text;\r\nusing OpenQA.Selenium;\r\n \r\nnamespace AFPWebTest.TestFramework\r\n{\r\n    public class PageBase\r\n    {\r\n        protected IWebDriver webDriver;\r\n    }\r\n}\r\n</script>\r\n<br/>\r\n<p>其中，NeedRefresh特性是自定义的：</p>\r\n<script type=\"syntaxhighlighter\" class=\"brush: c#\">\r\nusing System;\r\n \r\nnamespace Selenium.Tools\r\n{\r\n    [AttributeUsage(AttributeTargets.Field | AttributeTargets.Property, AllowMultiple = false, Inherited = true)]\r\n    public class NeedRefreshAttribute : Attribute\r\n    { }\r\n}\r\n</script>\r\n<br/>\r\n<p>还有一个自定义的Ignore特性：</p>\r\n\r\n<script type=\"syntaxhighlighter\" class=\"brush: c#\">\r\nusing System;\r\n \r\nnamespace Selenium.Tools\r\n{\r\n    [AttributeUsage(AttributeTargets.Field | AttributeTargets.Property, AllowMultiple = false, Inherited = true)]\r\n    public class IgnoreAttribute : Attribute\r\n    {}\r\n}\r\n</script>\r\n<br/>\r\n<p>使用NeedRefreshAttribute描述页面元素来表示在初始化Page类之后，这个页面元素的相关属性和值素会有更改。IgnoreAttribute是指在使用PageFactory初始化页面对象时需要略过，不需要实例化的元素。</p>\r\n<p>下面，我们设计一个xml结构来描述页面中的元素：</p>\r\n<script type=\"syntaxhighlighter\" class=\"brush: xml\">\r\n<?xml version=\"1.0\"?>\r\n<Map>\r\n    <UIMaps>\r\n        <UIMap Id=\"UserNameInput\">\r\n            <By>Id</By>\r\n            <ToFind>userName</ToFind>\r\n        </UIMap>\r\n        <UIMap Id=\"PassWordInput\">\r\n            <By>Id</By>\r\n            <ToFind>password</ToFind>\r\n        </UIMap>\r\n        <UIMap Id=\"SelectLanguageLinkBar\">\r\n            <By>XPath</By>\r\n            <ToFind>//div[@id=\'formContainer\']//div[@class=\'header\']</ToFind>\r\n        </UIMap>\r\n        <UIMap Id=\"EnglisghLanguageLink\">\r\n            <By>XPath</By>\r\n            <ToFind>//div[@id=\'formContainer\']//a[contains(., \'English\')]</ToFind>\r\n        </UIMap>\r\n    </UIMaps>\r\n</Map>\r\n</script>\r\n<br/>\r\n<p>其中，每个UIMap节点描述一个页面元素，属性Id的值需要和Page类中Public的IWebElement属性名字相同，XML By节点的值和Selenium提供的By类的方法名相同，有这些值：By.ClassName, By.CssSelector, By.Id, By.LinkText, By.Name,By.TagName和By.XPath.XML ToFind节点的值是使用以上By提供的方法所传入的参数。</p>\r\n<p>下面是xml文件对应的UIMap和Map类的实现：</p>\r\n<script type=\"syntaxhighlighter\" class=\"brush: c#\">\r\nusing System.Xml.Serialization;\r\n \r\nnamespace Selenium.Tools.xml\r\n{\r\n    public class UIMap\r\n    {\r\n        [XmlAttribute]\r\n        public string Id\r\n        { get; set; }\r\n \r\n        [XmlElement]\r\n        public string By\r\n        { get; set; }\r\n \r\n        [XmlElement]\r\n        public string ToFind\r\n        { get; set; }\r\n    }\r\n}\r\n \r\nusing System.Xml.Serialization;\r\n \r\nnamespace Selenium.Tools.xml\r\n{\r\n    [XmlRoot]\r\n    public class Map\r\n    {\r\n        [XmlArray]\r\n        public UIMap[] UIMaps\r\n        { get; set; }\r\n    }\r\n}\r\n</script>\r\n\r\n<br/>\r\n<p>\r\n我们就是通过这个描述Web Page的XML文件，来达到解耦测试代码和UI描述的目的。\r\n好了，下面就是具体实现PageFactory和解析UIMaps的代码:</p>\r\n<script type=\"syntaxhighlighter\" class=\"brush: c#\">\r\nusing System;\r\nusing System.Linq;\r\nusing System.Reflection;\r\n \r\nusing System.Xml.Serialization;\r\nusing System.IO;\r\nusing System.Collections.Generic;\r\nusing Castle.DynamicProxy;\r\nusing Selenium.Tools.xml;\r\nusing OpenQA.Selenium;\r\nusing OpenQA.Selenium.Support.PageObjects;\r\nusing OpenQA.Selenium.Internal;\r\n \r\nnamespace Selenium.Tools\r\n{\r\n    public static class PageFactory\r\n    {\r\n        public static string UIMapFilePath { get; set; }\r\n \r\n        private static bool DoesHasAttribute(PropertyInfo propertyInfo, IList<Type> attributes)\r\n        {\r\n            foreach (Type attribute in attributes)\r\n            {\r\n                var customAttributes = propertyInfo.GetCustomAttributes(attribute, true);\r\n                if (customAttributes.Length != 0)\r\n                {\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        }\r\n \r\n        private static Tpage ConstructPage<Tpage>(IWebDriver driver, IList<Type> ignoreAttributes, IList<Type> fetchAttributes) where Tpage : class\r\n        { \r\n            Type type = typeof(Tpage);\r\n            ConstructorInfo constructorInfo = type.GetConstructor(BindingFlags.Instance | BindingFlags.Public,\r\n                null,\r\n                CallingConventions.HasThis,\r\n                new Type[] { driver.GetType() },\r\n                null);\r\n            Tpage pageObject = constructorInfo.Invoke(new object[] { driver }) as Tpage;\r\n \r\n            var properties = type.GetProperties(BindingFlags.Instance |\r\n                BindingFlags.Public |\r\n                BindingFlags.ExactBinding |\r\n                BindingFlags.SetProperty\r\n                );\r\n \r\n            foreach (var property in properties)\r\n            {\r\n                if (property.PropertyType.Name != \"IWebElement\" || DoesHasAttribute(property, ignoreAttributes))\r\n                {\r\n                    //Do not init webelement that marked as Ignore\r\n                    continue;\r\n                }\r\n                //When fetchAttributes==null, all property without ignore attributes need to be set\r\n                if (fetchAttributes == null || DoesHasAttribute(property, fetchAttributes))\r\n                {\r\n                    property.SetValue(\r\n                        pageObject,\r\n                        driver.FindElement(\r\n                            ParseUIMaps(type.Name,\r\n                                property.Name)),\r\n                        null);\r\n                }\r\n            }\r\n            return pageObject;\r\n        }\r\n \r\n        public static Tpage InitPage<Tpage>(IWebDriver driver) where Tpage : class\r\n        {\r\n            return ConstructPage<Tpage>(driver, new List<Type>() { typeof(IgnoreAttribute) }, null);\r\n        }\r\n \r\n        public static Tpage RefreshPage<Tpage>(IWebDriver driver) where Tpage : class\r\n        {\r\n            return ConstructPage<Tpage>(driver, new List<Type>() { typeof(IgnoreAttribute) }, new List<Type>() { typeof(NeedRefreshAttribute) });\r\n        }\r\n \r\n        private static By ParseUIMaps(string pageName, string uimapId)\r\n        {\r\n            XmlSerializer serializer = new XmlSerializer(typeof(Map));\r\n            Map map = null;\r\n            using (FileStream fileStream = new FileStream(Path.Combine(UIMapFilePath, pageName + \".xml\"), FileMode.Open))\r\n            {\r\n                map = serializer.Deserialize(fileStream) as Map;\r\n            }\r\n            if (map == null)\r\n            {\r\n                throw new Exception(\"Fail to deserialize UIMap xml file!!\");\r\n            }\r\n \r\n            var uimap = (from i in map.UIMaps where i.Id == uimapId select i).Single();\r\n            return ConstructBy(uimap);\r\n        }\r\n \r\n        private static By ConstructBy(UIMap uimap)\r\n        {\r\n            By by = null;\r\n            switch (uimap.By)\r\n            {\r\n                case \"ClassName\":\r\n                    return By.ClassName(uimap.ToFind);\r\n                case \"CssSelector\":\r\n                    return By.CssSelector(uimap.ToFind);\r\n                case \"Id\":\r\n                    return By.Id(uimap.ToFind);\r\n                case \"LinkText\":\r\n                    return By.LinkText(uimap.ToFind);\r\n                case \"Name\":\r\n                    return By.Name(uimap.ToFind);\r\n                case \"PartialLinkText\":\r\n                    return By.PartialLinkText(uimap.ToFind);\r\n                case \"TagName\":\r\n                    return By.TagName(uimap.ToFind);\r\n                case \"XPath\":\r\n                    return By.XPath(uimap.ToFind);\r\n            }\r\n            return null;\r\n        }\r\n    }\r\n}\r\n</script>\r\n<br/>\r\n<p>上面的代码通过使用反射技术，读取与Page类的名字相同的xml文件，并从中取得信息来实例化Page类的对象。</p>\r\n<p>再实现一个扩展方法，简化代码：</p>\r\n<script type=\"syntaxhighlighter\" class=\"brush: c#\">\r\nusing System;\r\nusing System.Collections.Generic;\r\nusing System.Linq;\r\nusing System.Text;\r\nusing Selenium.Tools;\r\nusing OpenQA.Selenium;\r\n \r\nnamespace WebTest.TestFramework\r\n{\r\n    public static class UIMapperHelper\r\n    {\r\n        public static Tpage Refresh<Tpage>(this Tpage page, IWebDriver driver) where Tpage : class\r\n        {\r\n            return PageFactory.RefreshPage<Tpage>(driver);\r\n        }\r\n \r\n        public static Tpage Init<Tpage>(this Tpage page, IWebDriver driver) where Tpage : class\r\n        {\r\n            return PageFactory.InitPage<Tpage>(driver);\r\n        }\r\n    }\r\n}\r\n</script>\r\n<br/>\r\n<p>好了，testcase的代码如下(使用Nunit实现)：</p>\r\n\r\n<script type=\"syntaxhighlighter\" class=\"brush: c#\">\r\nusing System;\r\nusing System.Collections.Generic;\r\nusing System.Linq;\r\nusing System.Text;\r\n \r\nusing OpenQA.Selenium;\r\nusing OpenQA.Selenium;\r\nusing OpenQA.Selenium.Firefox;\r\nusing OpenQA.Selenium.IE;\r\nusing OpenQA.Selenium.Support.UI;\r\nusing OpenQA.Selenium.Interactions;\r\nusing OpenQA.Selenium.Remote;\r\nusing OpenQA.Selenium.Support.PageObjects;\r\n \r\nusing NUnit.Framework;\r\nusing WebTest.TestFramework;\r\nusing PageObjectFactory = Selenium.Tools.PageFactory;\r\n \r\nnamespace WebTest.TestCases\r\n{\r\n    [TestFixture]\r\n    public class BVT : WebTestBase\r\n    {\r\n        [Test]\r\n        [TestCase(\"camel\", \"123456\")]\r\n        public void LoginTest(string username, string passwd)\r\n        {\r\n            IWebDriver driver = new FirefoxDriver();\r\n            driver.Navigate().GoToUrl(\"http://172.16.1.123:8080\");\r\n \r\n            PageObjectFactory.UIMapFilePath = @\"E:\\src_test\\WebTest\\TestFramework\\UIMaps\";\r\n            LoginPage loginPage = PageObjectFactory.InitPage<LoginPage>(driver);\r\n            loginPage.SelectLanguage(LanguageType.English);\r\n \r\n            loginPage = loginPage.Refresh(driver);\r\n            loginPage.Login(username, passwd);\r\n \r\n            this.AddTestCleanup(\"Close Browser\",\r\n                () => { driver.Close(); });\r\n        }\r\n    }\r\n}\r\n</script>\r\n<br/>\r\n<p>其中，”E:\\src_test\\WebTest\\TestFramework\\UIMaps”目录包含的是描述LoginPage页面的LoginPage.xml文件。\r\n好了，以后如果LoginPage的UI有变化时，只需要修改LoginPage.xml文件，不会影响到测试代码。</p>\r\n','2016-06-21 10:52:31','2016-06-21 10:36:13','PUBLISHED',39,'peng',6,'HTML'),(31,'搭建NuGet私服','使用NuGet来管理和更新team内部共享的类库是个好方法，并将其与CI工具集成，在build的过程中对公用项目进行NuGet打包和分发。','<p>使用NuGet来管理和更新team内部共享的类库是个好方法，并将其与CI工具集成，在build的过程中对公用项目进行NuGet打包和分发。搭建NuGet私服方法如下：</p>\r\n		<p>1. 打开VS2010的Extension Manager窗口，选择NuGet Package Manager下载：<br>\r\n		<a href=\"/resources/151453183765334.png\" data-lightbox=\"image-1\" data-title=\"\"><img src=\"/resources/151453183765334.png\" alt=\"\" height=\"50%\"></a></p>\r\n		<p>2. 安装NuGet Package Manager:<br>\r\n		<a href=\"/resources/151453320956710.png\" data-lightbox=\"image-1\" data-title=\"\"><img src=\"/resources/151453320956710.png\" alt=\"\" height=\"50%\"></a></p>\r\n		<p><a href=\"/resources/151453438763944.png\" data-lightbox=\"image-1\" data-title=\"\"><img src=\"/resources/151453438763944.png\" alt=\"\" height=\"50%\"></a></p>\r\n		<p>3. 重启VS2010</p>\r\n\r\n		<p>\r\n		<a href=\"/resources/151503235011898.png\" data-lightbox=\"image-1\" data-title=\"\">\r\n		<img src=\"/resources/151503235011898.png\" alt=\"\" height=\"10%\">\r\n		</a>\r\n		<br><br>\r\n		</p>\r\n\r\n		<p>4. 使用VS2010创建一个Empty Web Application项目：</p>\r\n		<p>\r\n		<a href=\"/resources/151453533452551.png\" data-lightbox=\"image-1\" data-title=\"\">\r\n		<img src=\"/resources/151453533452551.png\" alt=\"\" height=\"50%\"></a><br><br></p>\r\n		<p>5. 打开Manage NuGet Packages</p>\r\n		<p>\r\n		<a href=\"/resources/151454090954339.png\" data-lightbox=\"image-1\" data-title=\"\">\r\n		<img src=\"/resources/151454090954339.png\" alt=\"\" height=\"50%\"></a><br><br></p>\r\n		<p>6. 搜索NuGet.Server并安装：</p>\r\n		<p>\r\n		<a href=\"/resources/151454187821946.png\" data-lightbox=\"image-1\" data-title=\"\">\r\n		<img src=\"/resources/151454187821946.png\" alt=\"\" height=\"50%\"></a><br><br></p>\r\n		<p>7. 选择刚才新建的Web Application项目，将NuGet.Server包应用到上面：</p>\r\n		<p>\r\n		<a href=\"/resources/151454269544283.png\" data-lightbox=\"image-1\" data-title=\"\">\r\n		<img src=\"/resources/151454269544283.png\" alt=\"\" height=\"50%\">\r\n		</a><br>\r\n		<a href=\"/resources/151454358453234.png\" data-lightbox=\"image-1\" data-title=\"\">\r\n		<img src=\"/resources/151454358453234.png\" alt=\"\" height=\"50%\"></a><br><br></p>\r\n		<p>8. 打开Web Application项目查看，发现NuGet.Server和相关依赖已经加到引用里面了，这就是NuGet的方便之处:)<br><a href=\"/resources/151454443458770.png\" data-lightbox=\"image-1\" data-title=\"\"><img src=\"/resources/151454443458770.png\" alt=\"\" height=\"60%\"></a></p>\r\n		<p>9. 打开Web Application项目的Web.config，加一个Guid到apiKey中，正如config文件comment里面说的，这个Guid是push和delete nuget包到咱们的私服时，需要使用的密码：<br>\r\n		<a href=\"/resources/151454527351106.png\" data-lightbox=\"image-1\" data-title=\"\">\r\n		<img src=\"/resources/151454527351106.png\" alt=\"\" height=\"50%\"></a></p>\r\n		<p>10. Publish这个Web application到IIS里面，这个server就建好喽:)<br>\r\n		<a href=\"/resources/151454595329429.png\" data-lightbox=\"image-1\" data-title=\"\">\r\n		<img src=\"/resources/151454595329429.png\" alt=\"\" height=\"50%\"></a></p>\r\n		<p>11. 测试一下website：<br>\r\n		<a href=\"/resources/151455061268282.png\" data-lightbox=\"image-1\" data-title=\"\">\r\n		<img src=\"/resources/151455061268282.png\" alt=\"\" height=\"50%\"></a></p>\r\n		<p>12. 一切正常的话，会看到如下的页面：<br>\r\n		<a href=\"/resources/151455134854033.png\" data-lightbox=\"image-1\" data-title=\"\">\r\n		<img src=\"/resources/151455134854033.png\" alt=\"\" height=\"20%\"></a></p>\r\n		<p> </p>\r\n		<p>13. 如上面页面显示的，访问http://hostname/nuget/Packages查看当前Server上面的nuget包：</p>\r\n		<p>\r\n		<a href=\"/resources/151457131105187.png\" data-lightbox=\"image-1\" data-title=\"\">\r\n		<img src=\"/resources/151457131105187.png\" alt=\"\" height=\"50%\"></a></p>\r\n		<p>14. 好了，以后就可以使用nuget.exe push我们自己的nuget包到我们自己的nuget server上面了</p>\r\n		<p>15. 接着配置client端的VS2010（也就是team内每个开发人员需要配置的),打开Option，找到Package Manager -> Package Source，将我们自己建的Nuget Server的地址加到其中：<br>\r\n		<a href=\"/resources/151457059852664.png\" data-lightbox=\"image-1\" data-title=\"\">\r\n		<img src=\"/resources/151457059852664.png\" alt=\"\" height=\"50%\"></a></p>\r\n		<p>16. 好了，再打开我们的Manage NuGet Packages，你就会看到刚刚加的InternalNuget了：<br>\r\n		<a href=\"/resources/151456460798079.png\" data-lightbox=\"image-1\" data-title=\"\">\r\n		<img src=\"/resources/151456460798079.png\" alt=\"\" height=\"50%\"></a></p>\r\n','2016-06-30 06:41:25','2016-06-30 06:12:19','PUBLISHED',6,'peng',5,'HTML');
/*!40000 ALTER TABLE `blog` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `blog_tag`
--

DROP TABLE IF EXISTS `blog_tag`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `blog_tag` (
  `blog_id` int(11) NOT NULL,
  `tag_id` int(11) NOT NULL,
  PRIMARY KEY (`blog_id`,`tag_id`),
  KEY `fk_blog_tag_2_idx` (`tag_id`),
  CONSTRAINT `fk_blog_tag_1` FOREIGN KEY (`blog_id`) REFERENCES `blog` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `fk_blog_tag_2` FOREIGN KEY (`tag_id`) REFERENCES `tag` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `blog_tag`
--

LOCK TABLES `blog_tag` WRITE;
/*!40000 ALTER TABLE `blog_tag` DISABLE KEYS */;
INSERT INTO `blog_tag` VALUES (25,3),(28,3),(29,3),(31,3),(20,6),(20,7),(21,8),(22,8);
/*!40000 ALTER TABLE `blog_tag` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `category`
--

DROP TABLE IF EXISTS `category`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `category` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `create_time` datetime NOT NULL,
  `update_time` datetime NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=11 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `category`
--

LOCK TABLES `category` WRITE;
/*!40000 ALTER TABLE `category` DISABLE KEYS */;
INSERT INTO `category` VALUES (5,'持续化集成','2016-06-15 03:21:20','2016-06-15 03:21:20'),(6,'自动化测试','2016-06-15 03:21:44','2016-06-15 03:21:44'),(10,'服务端测试','2016-06-18 08:41:02','2016-06-18 08:41:02');
/*!40000 ALTER TABLE `category` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `comment`
--

DROP TABLE IF EXISTS `comment`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `comment` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `content` text COLLATE utf8_unicode_ci NOT NULL,
  `comment_user_id` int(11) NOT NULL,
  `create_time` datetime NOT NULL,
  `blog_id` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `fk_comment_1_idx` (`comment_user_id`),
  KEY `fk_comment_2_idx` (`blog_id`),
  CONSTRAINT `fk_comment_1` FOREIGN KEY (`comment_user_id`) REFERENCES `comment_user` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `fk_comment_2` FOREIGN KEY (`blog_id`) REFERENCES `blog` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `comment`
--

LOCK TABLES `comment` WRITE;
/*!40000 ALTER TABLE `comment` DISABLE KEYS */;
/*!40000 ALTER TABLE `comment` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `comment_user`
--

DROP TABLE IF EXISTS `comment_user`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `comment_user` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(45) COLLATE utf8_unicode_ci NOT NULL,
  `email` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `blog_url` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `remote_ip` varchar(45) COLLATE utf8_unicode_ci DEFAULT NULL,
  `update_time` datetime NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `comment_user`
--

LOCK TABLES `comment_user` WRITE;
/*!40000 ALTER TABLE `comment_user` DISABLE KEYS */;
INSERT INTO `comment_user` VALUES (1,'测试','liupeng@gmail.com','http://pengliu.cf','36.110.112.98','2016-06-29 08:08:44'),(2,'tester','sdfsdf@sfsdf.com','','36.110.112.98','2016-06-29 11:15:33');
/*!40000 ALTER TABLE `comment_user` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `friendly_link`
--

DROP TABLE IF EXISTS `friendly_link`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `friendly_link` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `url` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `display_name` varchar(45) COLLATE utf8_unicode_ci NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=7 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `friendly_link`
--

LOCK TABLES `friendly_link` WRITE;
/*!40000 ALTER TABLE `friendly_link` DISABLE KEYS */;
INSERT INTO `friendly_link` VALUES (1,'http://coolshell.cn/','酷 壳 – CoolShell.cn'),(2,'http://www.ahathinking.com/','勇幸|Thinking'),(3,'http://www.ruanyifeng.com/blog/','阮一峰的网络日志'),(4,'http://blog.zhaojie.me/','老赵点滴'),(5,'http://wangheng.org','王恒\'s Blog'),(6,'http://lihao.cf','豪哥的博客');
/*!40000 ALTER TABLE `friendly_link` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `tag`
--

DROP TABLE IF EXISTS `tag`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `tag` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(45) COLLATE utf8_unicode_ci NOT NULL,
  `create_time` datetime NOT NULL,
  `update_time` datetime NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=9 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `tag`
--

LOCK TABLES `tag` WRITE;
/*!40000 ALTER TABLE `tag` DISABLE KEYS */;
INSERT INTO `tag` VALUES (3,'Others','2016-06-15 07:42:41','2016-06-18 09:01:07'),(6,'Jenkins','2016-06-18 08:33:17','2016-06-18 08:33:17'),(7,'Tomcat','2016-06-18 08:33:25','2016-06-18 08:33:25'),(8,'JMeter','2016-06-18 08:41:18','2016-06-18 08:41:55');
/*!40000 ALTER TABLE `tag` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `user`
--

DROP TABLE IF EXISTS `user`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `user` (
  `name` varchar(45) COLLATE utf8_unicode_ci NOT NULL,
  `password` varchar(60) COLLATE utf8_unicode_ci NOT NULL COMMENT '				',
  `enabled` tinyint(4) NOT NULL DEFAULT '1',
  PRIMARY KEY (`name`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `user`
--

LOCK TABLES `user` WRITE;
/*!40000 ALTER TABLE `user` DISABLE KEYS */;
INSERT INTO `user` VALUES ('peng','$2a$10$ztYk1rqH0pggx5LPbay2QOJsDeFwkZhpvXCeejzZQu2mHwXCT.Ka2',1);
/*!40000 ALTER TABLE `user` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `user_roles`
--

DROP TABLE IF EXISTS `user_roles`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `user_roles` (
  `user_role_id` int(11) NOT NULL AUTO_INCREMENT,
  `username` varchar(45) COLLATE utf8_unicode_ci NOT NULL,
  `role` varchar(45) COLLATE utf8_unicode_ci NOT NULL,
  PRIMARY KEY (`user_role_id`),
  UNIQUE KEY `uni_username_role` (`role`,`username`),
  KEY `fk_username_idx` (`username`),
  CONSTRAINT `fk_foreng_username` FOREIGN KEY (`username`) REFERENCES `user` (`name`)
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `user_roles`
--

LOCK TABLES `user_roles` WRITE;
/*!40000 ALTER TABLE `user_roles` DISABLE KEYS */;
INSERT INTO `user_roles` VALUES (1,'peng','ROLE_ADMIN');
/*!40000 ALTER TABLE `user_roles` ENABLE KEYS */;
UNLOCK TABLES;
/*!40103 SET TIME_ZONE=@OLD_TIME_ZONE */;

/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;

-- Dump completed on 2016-06-30 16:20:17
